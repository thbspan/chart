<mxfile host="app.diagrams.net" modified="2020-12-26T14:30:47.187Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36" etag="rdVnIkj055r1cpL5xfNR" version="14.1.2" type="github">
  <diagram name="Page-1" id="8ce9d11a-91a2-4d17-14d8-a56ed91bf033">
    <mxGraphModel dx="1890" dy="806" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-1" target="5JQUkEHfzBp8Dk0_tp1d-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-1" value="http 请求" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="120" y="40" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-2" target="5JQUkEHfzBp8Dk0_tp1d-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-2" value="restTemplate.getForObject" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="85" y="120" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-7" value="多次调用execute方法，串联所有的interceptor拦截器" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-4" target="5JQUkEHfzBp8Dk0_tp1d-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-4" value="InterceptingRequestExecution的execute" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="12.5" y="200" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-6" target="5JQUkEHfzBp8Dk0_tp1d-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-6" value="LoadBalanceInterceptor的intercept" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="12.5" y="330" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Verdana;dashed=1;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-8" target="5JQUkEHfzBp8Dk0_tp1d-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-8" value="解析URI获取serviceName服务名" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="12.5" y="440" width="325" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-10" target="5JQUkEHfzBp8Dk0_tp1d-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-10" value="LoadBalancerRequestFactory创建LoadBalancerRequest&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="10.63" y="540" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;dashed=1;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-12" target="5JQUkEHfzBp8Dk0_tp1d-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-12" value="RibbonLoadBalancerClient execute执行请求" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="10.500000000000004" y="660" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-14" target="5JQUkEHfzBp8Dk0_tp1d-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-14" value="getLoadBalancer 根据serviceId获取&lt;br&gt;IloadBalancer负载均衡器&lt;br&gt;(可以按服务来配置不同的负载均衡器)" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="620" y="660" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-16" target="5JQUkEHfzBp8Dk0_tp1d-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-31" value="ZoneAwareLoadBalancer chooseServer" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-16" target="5JQUkEHfzBp8Dk0_tp1d-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-16" value="getServer 根据loadBalancer负载均衡器选择服务" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="620" y="788" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-18" target="5JQUkEHfzBp8Dk0_tp1d-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-18" value="创建RibbonServer 封装字段" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="655" y="920" width="258.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Verdana;dashed=1;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-20" target="5JQUkEHfzBp8Dk0_tp1d-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-20" value="执行 execute" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="655" y="1050" width="258.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-22" target="5JQUkEHfzBp8Dk0_tp1d-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-22" value="获取服务地址 execute" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1029" y="1050" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-27" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-24" target="5JQUkEHfzBp8Dk0_tp1d-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-24" value="获取RibbonBalancerContext对象" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="984.63" y="920" width="258.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-26" target="5JQUkEHfzBp8Dk0_tp1d-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-26" value="执行请求 apply" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1030" y="788" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-28" value="返回 returnVal" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="1030" y="660" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-33" value="ZoneAvoidanceRule的choose" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-30" target="5JQUkEHfzBp8Dk0_tp1d-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-30" value="BaseLoadBalancer的chooseServer" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="-100" y="788" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-32" target="5JQUkEHfzBp8Dk0_tp1d-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-32" value="getLoadBalancer获得 ZoneAwareLoadBalancer实例" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="-100" y="980" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-34" target="5JQUkEHfzBp8Dk0_tp1d-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-34" value="获得ZoneAvoidanceRule的CompositePredicate实例" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="-100" y="1100" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-39" value="CompositePredicate的chooseRobinAfterFiltering" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Verdana;" edge="1" parent="1" source="5JQUkEHfzBp8Dk0_tp1d-36" target="5JQUkEHfzBp8Dk0_tp1d-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-36" value="ZoneAwareLoadBalancer#getAllServers&lt;br&gt;获取所有的服务实例" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="-100" y="1245" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5JQUkEHfzBp8Dk0_tp1d-38" value="getEligibleServers获取匹配的所有服务&lt;br&gt;incrementAndGetModule轮询获取一个服务" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;labelBackgroundColor=none;strokeWidth=1;fontFamily=Verdana;fontSize=12;align=center;" vertex="1" parent="1">
          <mxGeometry x="-100" y="1500" width="328.75" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
